(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{9914:(e,t,s)=>{Promise.resolve().then(s.bind(s,5332))},2216:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var a=s(7437),r=s(2265),n=s(1942),c=s(5097),l=s(7485),i=s(8151),o=s(5428);let d=e=>{let{onClickSuggestion:t}=e,[s,n]=(0,r.useState)([]),{clientId:c,productId:l}=(0,o.H)();return(0,r.useEffect)(()=>{(async()=>{n(await (0,i.vt)(c,l))})()},[c,l]),(0,a.jsx)("div",{className:"flex justify-center items-center w-full",children:(0,a.jsxs)("div",{className:"p-4 max-w-md bg-white",children:[(0,a.jsxs)("h1",{className:"text-lg font-bold mb-3 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDC4B"}),"Hi there"]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3 text-xs",children:"Ask me anything about star health insurance.."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:null==s?void 0:s.map((e,s)=>(0,a.jsx)("button",{className:"py-1 px-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg shadow whitespace-nowrap text-xs",onClick:()=>t(e),children:e},s))})]})})};var x=s(8904);let h=()=>{let{clientId:e,productId:t}=(0,o.H)(),[s,h]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{f(!0),(async()=>{try{let s=await (0,i.zg)(e,t);h([{sender:"system",text:"Hello! How can I assist you today?"}]),m(s.id)}catch(e){console.error(e)}finally{f(!1)}})()},[e,t]);let w=a=>{if(""===a.trim())return;let r=[...s,{sender:"user",text:a}];(0,o.S)(!0),h(r),b(""),f(!0),(async()=>{await (0,i.fS)({chatId:u,message:a,clientId:e,productId:t}).then(e=>{f(!1),console.log(e),(0,o.S)(!1),h(t=>[...t,{sender:"system",text:null==e?void 0:e.messageContent}])}).catch(()=>{f(!1),alert("Error in sending message to chatCompletion")})})()};return(0,r.useEffect)(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})},[s]),(0,a.jsxs)("div",{className:"bg-white flex flex-col h-screen",children:[(0,a.jsxs)("div",{className:"flex-grow overflow-y-auto p-4",children:[s.map((e,t)=>(0,a.jsxs)("div",{className:"mb-3 flex items-start ".concat("user"===e.sender?"justify-end":"justify-start"),children:["system"===e.sender&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.etr,{className:"mr-2 text-lg text-purple-700"}),(0,a.jsx)("div",{className:"bg-purple-100 text-black p-3 rounded-lg max-w-xs text-sm",children:(0,a.jsx)(x.U,{children:e.text})})]}),"user"===e.sender&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-gray-100 text-black p-3 rounded-lg max-w-xs text-sm mr-2",children:e.text}),(0,a.jsx)(n.Xws,{className:"text-lg text-gray-700"})]})]},t)),p&&(0,a.jsxs)("div",{className:"flex items-start mb-3",children:[(0,a.jsx)(n.etr,{className:"mr-2 text-lg text-purple-700"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l.g4,{height:"10",width:"30",color:"#6b46c1",ariaLabel:"three-dots-loading"})})]}),(0,a.jsx)("div",{ref:y})]}),(0,a.jsxs)("div",{children:[!s.find(e=>"user"===e.sender)&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(d,{onClickSuggestion:e=>{b(e),w(e)}})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 p-3 rounded",children:[(0,a.jsx)("textarea",{className:"flex-1 bg-transparent outline-none text-black px-4 text-base resize-none",value:g,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||p||(e.preventDefault(),w(g))},placeholder:"Type your question...",rows:3}),(0,a.jsx)("button",{onClick:()=>w(g),className:"text-white bg-purple-500 hover:bg-purple-800 p-2 rounded-full focus:outline-none ml-3 text-lg",disabled:p,children:(0,a.jsx)(c.VzJ,{className:"pl-1"})})]})}),(0,a.jsxs)("div",{className:"text-center text-xs text-gray-400 p-2 border-t border-gray-200",children:["Developed by"," ",(0,a.jsx)("span",{children:(0,a.jsx)("a",{href:"https://www.chandanys.in/",target:"_blank",className:"underline decoration-gray-400",children:"Chandan"})})," ","â€¢ Powered by ChatGPT & Azure AI Search"]})]})]})}},5332:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(7437);s(2265);var r=s(2216);let n=()=>(0,a.jsx)("div",{children:(0,a.jsx)(r.Z,{})})},8151:(e,t,s)=>{"use strict";s.d(t,{fS:()=>c,zC:()=>l,vt:()=>i,zg:()=>n});var a=s(8472);let r="https://emc-b2b-api.azurewebsites.net/api/",n=async(e,t)=>{try{return(await a.Z.get("".concat(r,"XChatBot/InitChat/").concat(e,"/").concat(t))).data}catch(e){console.error(e)}},c=async e=>{try{return(await a.Z.post("".concat(r,"XChatBot/ChatCompletion"),e)).data}catch(e){throw Error(e instanceof Error?e.message:String(e))}},l=async(e,t)=>{try{return(await a.Z.get("".concat(r,"XChatBot/GetAllDocuments/").concat(e,"/").concat(t))).data}catch(e){throw Error(e instanceof Error?e.message:String(e))}},i=async(e,t)=>{try{return(await a.Z.get("".concat(r,"XChatBot/GetSuggestions/").concat(e,"/").concat(t))).data}catch(e){throw Error(e instanceof Error?e.message:String(e))}}},5428:(e,t,s)=>{"use strict";s.d(t,{H:()=>a,S:()=>r});let a=()=>{if(!window.location)return{clientId:"",productId:""};{let e=new URLSearchParams(window.location.search);return{clientId:e.get("clientId")||"ae87240b-d0b8-4ea1-b3a1-7f4e7caef0f4",productId:e.get("productId")||"b46a6bc5-b7ad-48c8-bbbb-259082522ac6"}}},r=e=>{new Audio(e?"/x-chatbot/sounds/send.mp3":"/x-chatbot/sounds/receive.mp3").play()}}},e=>{var t=t=>e(e.s=t);e.O(0,[699,706,571,387,130,215,744],()=>t(9914)),_N_E=e.O()}]);